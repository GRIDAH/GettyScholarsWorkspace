// Generated by CoffeeScript 1.6.2
(function() {
  var $;

  $ = jQuery;

  Drupal.behaviors.ScribeImageAnnotator = {
    attach: function(context, settings) {
      var annotator, perm_opts;

      perm_opts = {
        user: Drupal.settings.scribe.username,
        showViewPermissionsCheckbox: false,
        showEditPermissionsCheckbox: false,
        userAuthorize: function(op, annotation, user) {
          return annotation.permissions[op];
        }
      };
      Drupal.annotator.image = $('.scribe-image-annotation .field-items').annotator();
      annotator = Drupal.annotator.image;
      annotator.annotator('addPlugin', 'ImageAnnotator');
      annotator.annotator('addPlugin', 'Threading');
      annotator.annotator('addPlugin', 'DrupalStoreImage');
      return annotator.annotator('addPlugin', 'DrupalPermissions', perm_opts);
    }
  };

}).call(this);
